analysis_flow:
  - state: CATEGORY_SELECTION
    prompt:
      en: |
        Hello, and welcome to valuAI!
        I am here to help you uncover the story, rarity, and collector value of your items.
        Please select the type of collectible you would like to analyze:

          * Medals
          * Banknotes

        Choosing the correct category ensures the most accurate research and insights.
    transition: IMAGE_UPLOAD

  - state: IMAGE_UPLOAD
    prompt:
      en: |
        Great! You have selected @CATEGORY@.
        Please upload clear photos of your @CATEGORY@ from all required sides:
          * Front
          * Back
          * Any inscriptions or special markings
        High-quality images help us provide the best analysis.
    transition: ADDITION_CONTEXT

  - state: ADDITION_CONTEXT
    optional: true
    prompt:
      en: |
        Thanks for uploading the photos! ðŸ‘Œ
        To give you the most accurate insights, do you have any additional context about this @CATEGORY@?
        Examples: origin, type, recipient, year, or historical background.
        This step is optional - you can skip it if you do not have extra information.
    transition: ANALYSIS_INFO

  - state: ANALYSIS_INFO
    prompt:
      en: |
        Thank you for the information provided.
        We are now analyzing the images and context to uncover the story, rarity, and potential collector value of your @CATEGORY@.
        This may take a few moments. We might ask follow-up questions if needed. Please hold on!
    transition: FOLLOW_UP_QUESTIONS

  - state: FOLLOW_UP_QUESTIONS
    optional: true
    prompt:
      en: |
        We may need some clarification to improve our analysis.
        If you have additional details about your @CATEGORY@, please provide them now.
        This step is optional.
    transition: ANALYSIS

  - state: ANALYSIS
    prompt:
      en: |
        Preliminary Analysis Ready! ðŸŽ‰
        Here is what we can tell so far about your @CATEGORY@:
          * Likely type: @TYPE@
          * Era / approximate date: @DATE@
          * Collectibility: @COLLECTIBILITY@
          * Confidence: @CONFIDENCE@
    transition: ANALYSIS_QUESTIONS
  - state: ANALYSIS_QUESTIONS

exceptions:
  - type: NON_CONFIDENT_ANALYSIS_EXCEPTION
    message:
      en: |
        I am sorry, but based on the provided information, I am unable to confidently analyze this item.
        No credits will be deducted from your account.
  - type: GENERIC_EXCEPTION
    message:
      en: |
        An unexpected error occurred during the analysis. Please try again later.